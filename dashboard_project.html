<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RelateX – CRM Dashboard</title>
  <link rel="stylesheet" href="css/style.css" />

  <!-- Chart.js + DataLabels -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">RelateX · CRM</div>
    <nav class="tabs">
      <button class="tab-btn active" data-target="view-dashboard">Dashboard</button>
      <button class="tab-btn" data-target="view-orders">Aufträge</button>
      <button class="tab-btn" data-target="view-inventory">Inventar</button>
      <button class="tab-btn" data-target="view-staff">Mitarbeiter</button>
    </nav>
  </header>

  <main class="layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2>Kunden</h2>
        <button id="btnAddCustomer" class="btn btn-primary btn-sm">+ Neuer Kunde</button>
      </div>
      <ul id="customerList" class="customer-list"><!-- via JS --></ul>
    </aside>

    <!-- Content -->
    <section class="content">

      <!-- DASHBOARD -->
      <section id="view-dashboard" class="view active">
        <div class="cards-grid">
          <!-- KPIs -->
          <div class="card">
            <h3>KPIs</h3>
            <div class="kpi-row">
              <div class="kpi"><span id="kpi-open-orders">0</span><label>Offene Aufträge</label></div>
              <div class="kpi"><span id="kpi-deadlines-week">0</span><label>Deadlines (7 Tage)</label></div>
              <div class="kpi"><span id="kpi-contacts">0</span><label>Kontakte</label></div>
            </div>
          </div>

          <!-- Diagramm (größer, ohne Überlauf) -->
          <div class="card">
            <div class="card-title-row">
              <h3>Aufträge: Offen vs. Beendet</h3>
            </div>
            <div class="chart-wrap">
              <canvas id="ordersChart"></canvas>
            </div>
          </div>

          <!-- Aktuelles -->
          <div class="card">
            <div class="card-title-row">
              <h3>Aktuelles</h3>
              <button class="btn btn-ghost btn-sm" id="btnEditAktuelles">Bearbeiten</button>
            </div>
            <ul id="aktuellesList" class="list"></ul>
          </div>

          <!-- Deadlines -->
          <div class="card">
            <div class="card-title-row">
              <h3>Deadlines</h3>
              <button class="btn btn-ghost btn-sm" id="btnEditDeadlines">Bearbeiten</button>
            </div>
            <ul id="deadlinesList" class="list"></ul>
          </div>

          <!-- Planung -->
          <div class="card">
            <div class="card-title-row">
              <h3>In Planung</h3>
              <button class="btn btn-ghost btn-sm" id="btnEditPlanung">Bearbeiten</button>
            </div>
            <ul id="planungList" class="list"></ul>
          </div>

          <!-- Kontakte -->
          <div class="card">
            <div class="card-title-row">
              <h3>Geschäftsführung · Kontakte</h3>
              <button class="btn btn-ghost btn-sm" id="btnEditKontakte">Bearbeiten</button>
            </div>
            <ul id="contactsList" class="list"></ul>
          </div>

          <!-- Kalender -->
          <div class="card">
            <div class="card-title-row"><h3>Kalender</h3></div>
            <form id="calendarForm" class="calendar-form">
              <input type="date" id="calDate" required />
              <input type="text" id="calTitle" placeholder="Eintrag" required />
              <button type="submit" class="btn btn-primary btn-sm">+ Eintragen</button>
            </form>
            <ul id="calendarList" class="list"></ul>
          </div>
        </div>
      </section>

      <!-- AUFTRÄGE -->
      <section id="view-orders" class="view">
        <div class="table-actions">
          <button id="btnAddOrder" class="btn btn-primary btn-sm">+ Auftrag</button>
        </div>
        <div class="table-wrap">
          <table id="ordersTable" class="table sortable">
            <thead>
              <tr>
                <th data-col="id">ID</th>
                <th data-col="titel">Titel</th>
                <th data-col="wert">Wert (€)</th>
                <th data-col="status">Status</th>
                <th data-col="anhaenge">Anhänge</th>
                <th>Aktion</th>
              </tr>
            </thead>
            <tbody id="ordersTbody"></tbody>
          </table>
        </div>
      </section>

      <!-- INVENTAR -->
      <section id="view-inventory" class="view">
        <div class="table-actions">
          <button id="btnAddInventar" class="btn btn-primary btn-sm">+ Inventar</button>
        </div>
        <div class="table-wrap">
          <table id="inventarTable" class="table sortable">
            <thead>
              <tr>
                <th data-col="id">ID</th>
                <th data-col="artikel">Artikel</th>
                <th data-col="menge">Menge</th>
                <th data-col="standort">Standort</th>
                <th>Aktion</th>
              </tr>
            </thead>
            <tbody id="inventarTbody"></tbody>
          </table>
        </div>
      </section>

      <!-- MITARBEITER -->
      <section id="view-staff" class="view">
        <div class="table-actions">
          <button id="btnAddStaff" class="btn btn-primary btn-sm">+ Mitarbeiter</button>
        </div>
        <div class="table-wrap">
          <table id="staffTable" class="table sortable">
            <thead>
              <tr>
                <th data-col="id">ID</th>
                <th data-col="name">Name</th>
                <th data-col="rolle">Rolle</th>
                <th data-col="mail">E-Mail</th>
                <th>Aktion</th>
              </tr>
            </thead>
            <tbody id="staffTbody"></tbody>
          </table>
        </div>
      </section>

    </section>
  </main>

  <footer class="foot">
    <span>© RelateX</span>
  </footer>

  <script src="components/logic.js"></script>
</body>
</html>
