<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Clickdummy Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #f5f5f5; display: flex; }
    .sidebar { width: 220px; background: #4b0082; color: white; padding: 20px 10px; height: 100vh; transition: width 0.3s; overflow: hidden; }
    .sidebar.collapsed { width: 60px; }
    .sidebar h3 { margin-top: 0; }
    .sidebar ul { list-style: none; padding: 0; }
    .sidebar li { padding: 8px 12px; margin-bottom: 5px; border-radius: 6px; cursor: pointer; }
    .sidebar li:hover { background: rgba(255,255,255,0.2); }
    .toggle-btn { background: transparent; border: none; color: white; font-size: 18px; cursor: pointer; margin-bottom: 15px; }
    .main { flex: 1; display: flex; flex-direction: column; }
    nav { display: flex; gap: 10px; background: #fff; padding: 12px 20px; border-bottom: 1px solid #ddd; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    nav button { padding: 10px 18px; border: none; border-radius: 8px; background: #e0e0e0; cursor: pointer; font-weight: bold; transition: background 0.2s; }
    nav button:hover { background: #cfcfcf; }
    nav button.active { background: #007bff; color: white; }
    .content { padding: 20px; overflow-y: auto; }
    .card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); margin-bottom: 20px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
    h2 { margin-top: 0; font-size: 20px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 10px; border-bottom: 1px solid #ddd; text-align: left; }
    th { background: #f0f0f0; }
    .top-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
    .header-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
    .chart { width: 250px !important; height: 250px !important; margin: 0 auto; display: block; }
    .actions { margin-bottom: 15px; display: flex; gap: 10px; justify-content: space-between; align-items: center; }
    .actions input[type="text"] { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 6px; }
    .actions button { padding: 8px 12px; border: none; border-radius: 6px; background: #007bff; color: #fff; cursor: pointer; }
    .actions button:hover { background: #0056b3; }
  </style>
</head>
<body>
  <div class="sidebar" id="sidebar">
    <button class="toggle-btn" id="toggleSidebar">☰</button>
    <h3>Kunden</h3>
    <ul>
      <li onclick="loadCustomer('A')">Kunde A</li>
      <li onclick="loadCustomer('B')">Kunde B</li>
      <li onclick="loadCustomer('C')">Kunde C</li>
      <li onclick="loadCustomer('D')">Kunde D</li>
    </ul>
  </div>

  <div class="main">
    <nav>
      <button id="btn-dashboard" class="active">Dashboard</button>
      <button id="btn-auftraege">Aufträge</button>
      <button id="btn-inventar">Inventar</button>
      <button id="btn-mitarbeiter">Mitarbeiter</button>
    </nav>

    <div class="content" id="content">
      <!-- Dashboard -->
      <div id="dashboard" class="view">
        <div class="top-grid">
          <div class="card">
            <h2>Aufträge Status</h2>
            <canvas id="auftraegeChart" class="chart"></canvas>
          </div>
          <div class="card">
            <h2>Geschäftsführung</h2>
            <p><strong>Geschäftsführer:</strong> Hans Müller<br>
               <strong>Telefon:</strong> +49 160 111111<br>
               <strong>Email:</strong> hans.mueller@firma.de</p>
            <p><strong>Ansprechpartner:</strong> Julia Meier (Projektmanagerin)<br>
               <strong>Telefon:</strong> +49 160 222222<br>
               <strong>Email:</strong> julia.meier@firma.de</p>
          </div>
        </div>
        <div class="grid">
          <div class="card">
            <h2>Aktuelles</h2>
            <div id="aktuelles"></div>
          </div>
          <div class="card">
            <h2>Deadlines</h2>
            <ul id="deadlines"></ul>
          </div>
          <div class="card">
            <h2>In Planung</h2>
            <ul id="planung"></ul>
          </div>
        </div>
      </div>

      <!-- Aufträge -->
      <div id="auftraege" class="view" style="display:none;">
        <div class="header-grid">
          <div class="card"><h2>Gesamtaufträge</h2><p id="auftraegeGesamt"></p></div>
          <div class="card"><h2>Aktive Aufträge</h2><p id="auftraegeAktiv"></p></div>
          <div class="card"><h2>Gesamtwert aktiv</h2><p id="auftraegeWert"></p></div>
        </div>
        <div class="actions">
          <input type="text" id="searchAuftraege" placeholder="Suchen...">
          <button>Neuer Auftrag</button>
          <button>CSV Import</button>
        </div>
        <div class="card">
          <h2>Aufträge Übersicht</h2>
          <table id="auftraegeTable"></table>
        </div>
      </div>

      <!-- Inventar -->
      <div id="inventar" class="view" style="display:none;">
        <div class="header-grid">
          <div class="card"><h2>Gesamtartikel</h2><p id="inventarGesamt"></p></div>
          <div class="card"><h2>Niedriger Bestand</h2><p id="inventarNiedrig"></p></div>
          <div class="card"><h2>Kategorien</h2><p id="inventarKategorien"></p></div>
        </div>
        <div class="actions">
          <input type="text" id="searchInventar" placeholder="Suchen...">
          <button>Neuer Artikel</button>
          <button>CSV Import</button>
        </div>
        <div class="card">
          <h2>Inventar Übersicht</h2>
          <table id="inventarTable"></table>
        </div>
      </div>

      <!-- Mitarbeiter -->
      <div id="mitarbeiter" class="view" style="display:none;">
        <div class="header-grid">
          <div class="card"><h2>Gesamtmitarbeiter</h2><p id="mitarbeiterGesamt"></p></div>
          <div class="card"><h2>Aktive Mitarbeiter</h2><p id="mitarbeiterAktiv"></p></div>
          <div class="card"><h2>Abteilungen</h2><p id="mitarbeiterAbteilungen"></p></div>
        </div>
        <div class="actions">
          <input type="text" id="searchMitarbeiter" placeholder="Suchen...">
          <button>Neuer Mitarbeiter</button>
          <button>CSV Import</button>
        </div>
        <div class="card">
          <h2>Mitarbeiter Übersicht</h2>
          <table id="mitarbeiterTable"></table>
        </div>
      </div>
    </div>
  </div>

  <script>
    const buttons = document.querySelectorAll("nav button");
    const views = document.querySelectorAll(".view");
    const sidebar = document.getElementById("sidebar");
    const toggleSidebar = document.getElementById("toggleSidebar");

    buttons.forEach(btn => {
      btn.addEventListener("click", () => {
        buttons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        views.forEach(v => v.style.display = "none");
        document.getElementById(btn.id.replace("btn-", "")).style.display = "block";
      });
    });

    toggleSidebar.addEventListener("click", () => { sidebar.classList.toggle("collapsed"); });

    const customers = {
      A: {
        aktuelles: "Neue IT-Infrastruktur in Planung",
        deadlines: ["Projekt A1 – 01.09.2025", "Projekt A2 – 15.09.2025"],
        planung: ["Projekt A3 – Angebotsphase"],
        auftraege: [
          ["A-2025-001", "Website Redesign", "In Bearbeitung", "Webentwicklung", "€12.500", "01.08.2025", "01.12.2025", "Herr Schmidt"],
          ["A-2025-002", "SEO Optimierung", "Warten auf Kunde", "Marketing", "€3.500", "15.08.2025", "30.09.2025", "Frau Keller"]
        ],
        inventar: [
          ["ART-001", "Laptop Dell XPS 13", "Hardware", "15 Stück", "Verfügbar", "€1.200", "€1.500", "Dell GmbH"],
          ["ART-002", "Monitor 24 Zoll", "Hardware", "3 Stück", "Niedrig", "€200", "€350", "Samsung"]
        ],
        mitarbeiter: [
          ["Max Mustermann", "Projektleiter", "IT", "Aktiv", "max@firma.de", "+49 160 123456", "01.01.2020", "Frau Müller"]
        ],
        chart: [8, 12]
      }
    };

    let currentChart;
    function loadCustomer(key) {
      const c = customers[key];
      document.getElementById("aktuelles").textContent = c.aktuelles;
      document.getElementById("deadlines").innerHTML = c.deadlines.map(d => `<li>${d}</li>`).join("");
      document.getElementById("planung").innerHTML = c.planung.map(p => `<li>${p}</li>`).join("");

      document.getElementById("auftraegeTable").innerHTML = `
        <tr><th>Auftragsnummer</th><th>Titel</th><th>Status</th><th>Kategorie</th><th>Betrag</th><th>Startdatum</th><th>Enddatum</th><th>Verantwortlicher</th><th>Dateien</th></tr>
        ${c.auftraege.map(a => `<tr>${a.map(v => `<td>${v}</td>`).join("")}<td><input type='file'></td></tr>`).join("")}`;

      document.getElementById("inventarTable").innerHTML = `
        <tr><th>Artikel-Nr.</th><th>Name</th><th>Kategorie</th><th>Bestand</th><th>Status</th><th>Preis</th><th>Verkaufspreis</th><th>Lieferant</th></tr>
        ${c.inventar.map(i => `<tr>${i.map(v => `<td>${v}</td>`).join("")}</tr>`).join("")}`;

      document.getElementById("mitarbeiterTable").innerHTML = `
        <tr><th>Name</th><th>Position</th><th>Abteilung</th><th>Status</th><th>E-Mail</th><th>Telefon</th><th>Eintrittsdatum</th><th>Vorgesetzter</th></tr>
        ${c.mitarbeiter.map(m => `<tr>${m.map(v => `<td>${v}</td>`).join("")}</tr>`).join("")}`;

      if (currentChart) currentChart.destroy();
      const ctx = document.getElementById('auftraegeChart');
      currentChart = new Chart(ctx, {
        type: 'pie',
        data: { labels: ['Offen', 'Beendet'], datasets: [{ data: c.chart, backgroundColor: ['#ff9800', '#4caf50'] }] },
        options: { responsive: false, maintainAspectRatio: false }
      });

      // KPI Werte füllen (Beispiel)
      document.getElementById("auftraegeGesamt").textContent = c.auftraege.length;
      document.getElementById("auftraegeAktiv").textContent = c.auftraege.filter(a => a[2] !== "Beendet").length;
      document.getElementById("auftraegeWert").textContent = "€" + c.auftraege.filter(a => a[2] !== "Beendet").reduce((sum, a) => sum + parseFloat(a[4].replace(/[^0-9.-]+/g, "")), 0);

      document.getElementById("inventarGesamt").textContent = c.inventar.length;
      document.getElementById("inventarNiedrig").textContent = c.inventar.filter(i => i[4] === "Niedrig").length;
      document.getElementById("inventarKategorien").textContent = new Set(c.inventar.map(i => i[2])).size;

      document.getElementById("mitarbeiterGesamt").textContent = c.mitarbeiter.length;
      document.getElementById("mitarbeiterAktiv").textContent = c.mitarbeiter.filter(m => m[3] === "Aktiv").length;
      document.getElementById("mitarbeiterAbteilungen").textContent = new Set(c.mitarbeiter.map(m => m[2])).size;
    }

    loadCustomer('A');
  </script>
</body>
</html>
